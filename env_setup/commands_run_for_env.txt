
This file includes instructions for setting up the environment to run bpnet on M1 along with some tests to make sure imports succeeded

Run the following commands to create the environment for Mac M1 to run BPNet
OR
A yml file was created for this environment `bpnet-m1.yml`, so you can also just run: `conda env create -f bpnet-m1.yml`

```
conda create -n bpnet-m1 python=3.8
pip install tensorflow-macos tensorflow-metal tensorflow-probability
conda install -y hdf5 pytables
pip install pysam==0.18.0 py2bit==0.3.0 tqdm scikit-learn scipy scikit-image deepdish pandas matplotlib plotly deeptools pyfaidx hdf5plugin deeplift
pip install git+https://github.com/kundajelab/shap.git
conda install -y -c bioconda samtools bedtools ucsc-bedgraphtobigwig
```

Now install bpnet-refactor











python -c "
import tensorflow as tf
import sys
if tf.config.list_physical_devices('GPU'):
    print('✅ MPS device detected')
    try:
        with tf.device('/GPU:0'):
            a = tf.random.normal((100, 100))
            result = tf.reduce_mean(tf.matmul(a, a))
            print(f'✅ MPS computation successful: {result.numpy():.4f}')
    except Exception as e:
        print(f'❌ MPS computation failed: {e}')
        sys.exit(1)
else:
    print('❌ No MPS device found')
    sys.exit(1)
"


samtools --version > /dev/null && echo "✅ samtools working"
bedtools --version > /dev/null && echo "✅ bedtools working"
bedGraphToBigWig 2>&1 | grep -q "bigWig" && echo "✅ bedGraphToBigWig working"